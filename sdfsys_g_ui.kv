#: import NoTransition kivy.uix.screenmanager.NoTransition
#: import rgba sdfsys_gamma.rgba
#: import bttn sdfsys_gamma.Bttn
#: import sys sdfsys_gamma.SysUi

    
<Button>:
    size_hint: bttn.x, bttn.y
    font_size: self.height*0.375
    color: rgba['h']
    background_color: rgba['h']

<TextInput>:
    font_name: 'Courier New'
    font_size: sp(32)
    background_color: [0,0,0,0]

ScreenManagement:
    transition: NoTransition()
    MainScreen:
    OtherScreen:
    
<MainScreen>:
#     canvas.before:
#         Color:
#             rgba: 1, 1, 1, 1
#         Rectangle:
#             pos: self.pos
#             size: self.size
    name: 'main_screen'
    # # # # # # # # # # 
    # # # # # # # # # #  
    # Top Row Buttons 
    Button:
        text: 'sys'
        pos_hint: {'x':0, 'top':1}
        on_release: app.root.current = 'other_screen'
    # # # #
    # txt
    Button:
        id: bttn_txt_0
        text: 'txt'
        pos_hint: {'x':bttn.hide, 'top':1}
        on_release:
            # hide self, show other bttn 
            self.pos_hint = {'x':bttn.hide}
            bttn_txt_1.pos_hint = {'x':bttn.txt_x_hint, 'top':1}
            # show other txt stuff
            textbox.pos_hint = {'x':bttn.x, 'top':1-bttn.y}
            textbox.focus = 1
            bttn_prs.pos_hint = {'x':0, 'top':bttn.prs_y_hint}
            bttn_get_i.pos_hint = {'x':bttn.get_i_x_hint, 'top':bttn.get_i_y_hint}
    Button:
        id: bttn_txt_1
        text: 'txt'
        pos_hint: {'x':bttn.txt_x_hint, 'top':1}
        color: sys.txt_rgba
        on_release: 
            # hide self, show other bttn 
            self.pos_hint = {'x':bttn.hide}
            bttn_txt_0.pos_hint = {'x':bttn.txt_x_hint, 'top':1}
            # hide other txt stuff
            textbox.pos_hint = {'x':bttn.hide, 'top':bttn.hide}
            bttn_prs.pos_hint = {'x':0, 'top':bttn.hide}
            bttn_get_i.pos_hint = {'x':bttn.hide, 'top':bttn.hide}
    # # # # #
    # spaces
    Button:
        id: bttn_spaces_1
        text: '[ + ]'
        pos_hint: {'x':bttn.spaces_x_hint, 'top':1}
        color: rgba['f']
        on_release:
            # hide self, show other bttn
            self.pos_hint = {'x':bttn.hide}
            bttn_spaces_0.pos_hint = {'x':bttn.spaces_x_hint, 'top':1}
            # hide other txt stuff
    Button:
        id: bttn_spaces_0
        text: '[ + ]'
        pos_hint: {'x':bttn.hide, 'top':1}
        color: rgba['h']
        on_release:
            # hide self, show other bttn
            self.pos_hint = {'x':bttn.hide}
            bttn_spaces_1.pos_hint = {'x':bttn.spaces_x_hint, 'top':1}
            # show other txt stuff
    # # #
    # i
    Button:
        id: bttn_i_0
        text: 'i'
        pos_hint: {'x':bttn.i_x_hint, 'top':1}
        on_release:
            # hide self, show other bttn 
            self.pos_hint = {'x':bttn.hide}
            bttn_i_1.pos_hint = {'x':bttn.i_x_hint, 'top':1}
            # show other stuff
            infobox.pos_hint = {'x':1-sys.infobox_size_x, 'top':1}
    Button:
        id: bttn_i_1
        text: 'i'
        color: sys.i_rgba
        pos_hint: {'x':bttn.hide, 'top':1}
        on_release: 
            # hide self, show other bttn 
            self.pos_hint = {'x':bttn.hide}
            bttn_i_0.pos_hint = {'x':bttn.i_x_hint, 'top':1}
            # hide other stuff
            infobox.pos_hint = {'x':bttn.hide}

    # # # # # # # # # # #
    # # # # # # # # # # #
    TextInput:
        id: textbox
        pos_hint: {'x':bttn.x, 'top':1-bttn.y}
        size_hint: sys.textbox_size_x, sys.textbox_size_y 
        foreground_color: sys.txt_rgba
        auto_indent: True
    TextInput:
        id: infobox
        text: 'info box'
        pos_hint: {'x':bttn.hide, 'top':1}
        size_hint: sys.infobox_size_x, sys.infobox_size_y
        disabled: True
        disabled_foreground_color: sys.i_rgba

    # # # # # # # # # # # 
    # # # # # # # # # # # 
    # # Left Side Buttons
    Button:
        id: bttn_prs
        text: 'txt | ^'
        pos_hint: {'x':0, 'top':bttn.prs_y_hint}
        color: sys.txt_rgba
        on_release: 
            self.parent.txt.process_text(textbox.text)
    Button:
        id: bttn_get_i
        text: '| i >'
        size_hint_x: bttn.x/2
        pos_hint: {'x':bttn.get_i_x_hint, 'top':bttn.get_i_y_hint}
        color: sys.txt_rgba
        on_release: 
            #textbox.text = infobox.text
            textbox.insert_text(chr(10), from_undo=False)
            textbox.insert_text(infobox.text, from_undo=False)
    # # # # # # # # # # #
    # # Spaces Buttons
    Button:
        id: bttn_spc_0
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':0, 'top':bttn.spc_0_y_hint}
        color: rgba[0]
        on_release:
            infobox.text = 'space 0'
    Button:
        id: bttn_spc_1
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':bttn.x/2, 'top':bttn.spc_1_y_hint}
        color: rgba[1]
        on_release:
            infobox.text = 'space 1'
    Button:
        id: bttn_spc_2
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':0, 'top':bttn.spc_2_y_hint}
        color: rgba[2]
        on_release:
            infobox.text = 'space 2'
    Button:
        id: bttn_spc_3
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':bttn.x/2, 'top':bttn.spc_3_y_hint}
        color: rgba[3]
        on_release:
            infobox.text = 'space 3'
    Button:
        id: bttn_spc_4
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':0, 'top':bttn.spc_4_y_hint}
        color: rgba[4]
        on_release:
            infobox.text = 'space 4'
    Button:
        id: bttn_spc_5
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':bttn.x/2, 'top':bttn.spc_5_y_hint}
        color: rgba[5]
        on_release:
            infobox.text = 'space 5'
    Button:
        id: bttn_spc_6
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':0, 'top':bttn.spc_6_y_hint}
        color: rgba[6]
        on_release:
            infobox.text = 'space 6'
    Button:
        id: bttn_spc_7
        text: '[ _ ]'
        size_hint_x: bttn.x/2
        pos_hint: {'x':bttn.x/2, 'top':bttn.spc_7_y_hint}
        color: rgba[7]
        on_release:
            infobox.text = 'space 7'


<OtherScreen>:
    name: 'other_screen'
    Button:
        text: 'sys'
        color: rgba['f']
        pos_hint: {'x':0, 'top':1}
        on_release: app.root.current = 'main_screen'

